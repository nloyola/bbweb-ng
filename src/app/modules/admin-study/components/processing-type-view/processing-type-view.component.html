<div class="card mt-2" *ngIf="processingType">
  <div class="card-header bg-primary text-light">
    <ng-container i18>Processing Step:</ng-container> {{ processingType.name }}
    <button
      class="btn btn-sm btn-light float-right"
      type="button"
      (click)="isPanelCollapsed = !isPanelCollapsed"
      [attr.aria-expanded]="!isCollapsed"
      aria-controls="processingTypeCollapse"
    >
      <mat-icon *ngIf="!isPanelCollapsed" inline="true">keyboard_arrow_down</mat-icon>
      <mat-icon *ngIf="isPanelCollapsed">keyboard_arrow_right</mat-icon>
    </button>

    <app-dropdown-menu
      [menuItems]="stepMenuItems"
      buttonClass="btn btn-sm btn-light mr-1 float-right"
      placement="bottom-right"
    ></app-dropdown-menu>
  </div>
  <div [ngbCollapse]="isPanelCollapsed" id="processingTypeCollapse">
    <ul class="list-group list-group-flush">
      <li class="list-group-item">
        <div class="row">
          <div class="col-md-3">
            <strong i18n>Name</strong>
          </div>
          <div class="col-md-9">
            {{ processingType.name }}
          </div>
        </div>
      </li>
      <li class="list-group-item" *ngIf="processingType.description">
        <div class="row">
          <div class="col-md-3">
            <strong i18n>Description</strong>
          </div>
          <div class="col-md-9">
            <app-truncate-toggle [text]="processingType.description" [toggleLength]="60">
            </app-truncate-toggle>
          </div>
        </div>
      </li>
      <li class="list-group-item">
        <div class="row">
          <div class="col-md-3">
            <strong i18n>Enabled</strong>
          </div>
          <div class="col-md-9">{{ processingType.enabled | yesNo }}</div>
        </div>
      </li>
      <li class="list-group-item" *ngFor="let annotationType of sortedAnnotationTypes">
        <div class="row">
          <div class="col-md-3">
            <strong translate>Annotation</strong>
          </div>
          <div class="col-md-7">
            <app-annotation-type-summary [annotationType]="annotationType"> </app-annotation-type-summary>
          </div>
          <div class="col-md-2">
            <app-annotation-type-actions
              [annotationType]="annotationType"
              [modifyAllowed]="allowChanges"
              (viewSelected)="viewAnnotationType($event)"
              (editSelected)="editAnnotationType($event)"
              (removeSelected)="removeAnnotationType($event)"
            >
            </app-annotation-type-actions>
          </div>
        </div>
      </li>
      <li class="list-group-item m-0 p-0">
        <app-entity-status
          [timeAdded]="processingType.timeAdded"
          [timeModified]="processingType.timeModified"
          [useBadges]="false"
        >
        </app-entity-status>
      </li>
    </ul>
  </div>
</div>

<!-- -INPUT -->
<div class="card mt-2" *ngIf="processingType">
  <div class="card-header bg-primary text-light">
    <span i18>Input Specimen</span>

    <app-dropdown-menu
      [menuItems]="inputMenuItems"
      buttonClass="btn btn-sm btn-light mr-1 float-right"
      placement="bottom-right"
    ></app-dropdown-menu>
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      <app-processing-input-specimen-summary [input]="processingType.input" [inputEntity]="inputEntity">
      </app-processing-input-specimen-summary>
    </li>
  </ul>
</div>

<!-- -OUTPUT -->
<div class="card mt-2" *ngIf="processingType">
  <div class="card-header bg-primary text-light">
    <span i18>Output Specimen</span>

    <app-dropdown-menu
      [menuItems]="outputMenuItems"
      buttonClass="btn btn-sm btn-light mr-1 float-right"
      placement="bottom-right"
    ></app-dropdown-menu>
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      <app-processing-output-specimen-summary [output]="processingType.output">
      </app-processing-output-specimen-summary>
    </li>
  </ul>
</div>
